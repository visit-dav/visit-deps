(function(){function H(c,a){function b(){this.constructor=c}for(var f in a)N.call(a,f)&&(c[f]=a[f]);b.prototype=a.prototype;c.prototype=new b;c.da=a.prototype}var I,z,v,A,J,x,y,B,K,u,L,C,D,E,F,G,M,O,N={}.hasOwnProperty;L=function(c){var a,b,f,g,d;a=[0];g=b=0;for(d=c.length;g<d;g++)f=c[g],b+=f,a.push(b);return a};u=function(c,a,b){return c<a?a:c>b?b:c};C=new (function(){function c(){this.S=[];this.ba=this.result=!1}c.prototype.ta=function(a){this.ba?a(this.result):this.S.push(a)};c.prototype.qa=function(){var a,
b,f,c,d;this.ba=!0;this.result=void 0;c=this.S;d=[];b=0;for(f=c.length;b<f;b++)a=c[b],d.push(a(void 0));return d};return c}());F=function(){document.removeEventListener("DOMContentLoaded",F);return C.qa()};document.addEventListener("DOMContentLoaded",F);G=function(){var c,a,b,f,g;c=document.createElement("div");g=["transform","WebkitTransform","MozTransform","OTransform","MsTransform"];b=0;for(f=g.length;b<f;b++)if(a=g[b],void 0!==c.style[a])return a}();y=function(){function c(){}c.prototype.C=function(){return!1};
c.prototype.Z=function(){return!1};c.prototype.u=function(a,b,f){null==f&&(f=function(){});return f("getCell not implemented")};c.prototype.v=function(a,b){null==b&&(b=function(){});return b("getHeader not implemented")};return c}();x=function(c){function a(){return O=a.da.constructor.apply(this,arguments)}H(a,c);a.prototype.ia=function(b,a){return b+","+a};a.prototype.ja=function(b){return"col "+b};a.prototype.C=function(){return!0};a.prototype.Z=function(){return!0};a.prototype.u=function(b,a,c){null==
c&&(c=function(){});return c(this.ia(b,a))};a.prototype.v=function(b,a){null==a&&(a=function(){});return a(this.ja(b))};return a}(y);z=function(){function c(a){this.size=null!=a?a:100;this.data={};this.B=[]}c.prototype.O=function(){return this.data.hasOwnProperty(void 0)};c.prototype.get=function(a){return this.data[a]};c.prototype.set=function(a,b){var f;f=this.B.indexOf(a);0<=f&&this.B.splice(f,1);this.B.push(a);this.B.length>=this.size&&(f=this.B.shift(),delete this.data[f]);return this.data[a]=
b};return c}();v=function(c){function a(b){null==b&&(b=100);this.Q=new z(b);this.P=new z(b);this.M={};this.w={}}H(a,c);a.prototype.v=function(b){var a=this;if(this.P.O())return cb(this.P.get(void 0)(b));if(null!=this.w[void 0])return this.w[void 0].push([b,cb]);this.w[void 0]=[[b,cb]];return this.Ha(void 0,function(c){var d,k,h,l;a.P.set(void 0,c);l=a.w[void 0];k=0;for(h=l.length;k<h;k++)d=l[k],b=d[0],d=d[1],d(c(b));return delete a.w[void 0]})};a.prototype.C=function(){return this.Q.O()};a.prototype.u=
function(a,f,c){null==c&&(c=function(){});if(this.Q.O())return c(this.Q.get(void 0)(a,f));if(null!=this.M[void 0])return this.M[void 0].push([a,f,c]);this.M[void 0]=[[a,f,c]]};a.prototype.v=function(a,c){null==c&&(c=function(){});return c("col "+a)};return a}(y);K=function(c,a){var b,f,g,d;if(c[0]>a)return 0;b=0;for(f=c.length;b+2<f;)if(g=(b+f)/2|0,d=c[g],d<a)b=g;else if(d>a)f=g;else return g;return b};A=function(){function c(){}c.prototype.J=function(a){var b,c;c=a.cells;for(b in c);a=a.j;c=[];for(b in a)c.push(void 0);
return c};c.prototype.W=function(a,b){return a.textContent=b};c.prototype.N=function(a,b){return a.textContent=b};c.prototype.ha=function(a){a.textContent="NA"};c.prototype.V=function(a){a.textContent="NA"};return c}();M=function(c,a){var b,f;b=1;for(f=0;f+b<c.length;)c[f+b]-c[f]>a?f+=1:b+=1;return b};I=function(){function c(){this.I=[]}c.prototype.bind=function(a,b,c){this.I.push([a,b,c]);return a.addEventListener(b,c)};c.prototype.ua=function(){var a,b,c,g,d,k;k=this.I;g=0;for(d=k.length;g<d;g++)a=
k[g],c=a[0],b=a[1],a=a[2],c.removeEventListener(b,a);this.I=[]};return c}();J=function(){function c(a,b,c,g,d,k,h){var l,m,e=this;this.a=a;this.b=b;this.q=c;this.p=g;this.visible=null!=k?k:!0;this.T=null!=h?h:!0;this.e=document.createElement("div");this.e.className+=" fattable-v-scrollbar";this.d=document.createElement("div");this.d.className+=" fattable-h-scrollbar";this.visible&&(this.a.appendChild(this.e),this.a.appendChild(this.d));a=document.createElement("div");a.style.height="1px";a.style.width=
this.q+"px";b=document.createElement("div");b.style.width="1px";b.style.height=this.p+"px";this.d.appendChild(a);this.e.appendChild(b);this.ca=Math.max(this.d.offsetHeight,this.e.offsetWidth);this.e.style.bottom=this.ca+"px";this.d.style.right=this.ca+"px";this.scrollTop=this.scrollLeft=0;this.d.onscroll=function(){if(!e.o&&e.scrollLeft!==e.d.scrollLeft)return e.scrollLeft=e.d.scrollLeft,e.n(e.scrollLeft,e.scrollTop)};this.e.onscroll=function(){if(!e.o&&e.scrollTop!==e.e.scrollTop)return e.scrollTop=
e.e.scrollTop,e.n(e.scrollLeft,e.scrollTop)};this.T&&(d.bind(this.a,"mousedown",function(a){if(1===a.button)return e.o=!0,e.a.className="fattable-body-container fattable-moving",e.L=e.scrollLeft+a.clientX,e.ga=e.scrollTop+a.clientY}),d.bind(this.a,"mouseup",function(){e.o=!1;return e.a.className="fattable-body-container"}),d.bind(this.a,"mousemove",function(a){return window.setTimeout(function(){var b,c;if(e.o)return b=-a.clientX+e.L,c=-a.clientY+e.ga,e.H(b,c)},0)}),d.bind(this.a,"mouseout",function(a){if(e.o&&
(null==a.toElement||a.toElement.parentElement.parentElement!==e.a))return e.a.className="fattable-body-container",e.o=!1}),d.bind(this.b,"mousedown",function(a){if(1===a.button)return e.D=!0,e.b.className="fattable-header-container fattable-moving",e.L=e.scrollLeft+a.clientX}),d.bind(this.a,"mouseup",function(a){var b;if(1===a.button)return e.D=!1,e.b.className="fattable-header-container",a.stopPropagation(),b=function(a){a.stopPropagation();return this.removeEventListener("click",b,!0)},e.a.addEventListener("click",
b,!0)}),d.bind(this.b,"mousemove",function(a){return window.setTimeout(function(){var b;if(e.D)return b=-a.clientX+e.L,e.H(b)},0)}),d.bind(this.b,"mouseout",function(a){if(e.D){if(null==a.toElement||a.toElement.parentElement.parentElement!==e.b)e.b.className="fattable-header-container";return e.D=!1}}));this.la=this.q>this.d.clientWidth?this.q-this.d.clientWidth:0;this.ma=this.p>this.e.clientHeight?this.p-this.e.clientHeight:0;m="DOMMouseScroll";void 0!==this.a.onwheel?m="wheel":void 0!==this.a.onmousewheel&&
(m="mousewheel");l=function(){switch(m){case "wheel":return function(a){var b,c,f,e,d,g;switch(a.Fa){case a.va:b=null!=(f=-50*a.ea)?f:0;c=null!=(e=-50*a.fa)?e:0;break;case a.wa:b=null!=(d=-1*a.ea)?d:0,c=null!=(g=-1*a.fa)?g:0}return[b,c]};case "mousewheel":return function(a){var b,c,f;b=null!=(c=a.wheelDeltaX)?c:0;a=null!=(f=a.wheelDeltaY)?f:a.wheelDelta;return[b,a]};case "DOMMouseScroll":return function(a){var b,c;c=b=0;a.axis===a.xa?b=-50*a.detail:c=-50*a.detail;return[b,c]}}}();d.bind(this.a,m,
function(a){var b;b=l(a);if(e.H(e.scrollLeft-b[0],e.scrollTop-b[1]))return a.preventDefault()});d.bind(this.b,m,function(a){var b;b=l(a);if(e.H(e.scrollLeft-b[0],e.scrollTop))return a.preventDefault()})}c.prototype.n=function(){};c.prototype.H=function(a,b){var c;c=!1;null!=a?(a=u(a,0,this.la),this.scrollLeft!==a&&(c=!0,this.scrollLeft=a)):a=this.scrollLeft;null!=b?(b=u(b,0,this.ma),this.scrollTop!==b&&(c=!0,this.scrollTop=b)):b=this.scrollTop;this.d.scrollLeft=a;this.e.scrollTop=b;this.n(a,b);return c};
return c}();B=function(){function c(a){var b,c=this;b=a.a;if(null==b)throw"container not specified.";if("string"===typeof b)this.a=document.querySelector(b);else if("object"===typeof b)this.a=b;else throw"Container must be a string or a dom element.";this.g(a,"painter",new A);this.g(a,"autoSetup",!0);this.g(a,"model");this.g(a,"nbRows");this.g(a,"rowHeight");this.g(a,"columnWidths");this.g(a,"rowHeight");this.g(a,"headerHeight");this.g(a,"scrollBarVisible",!0);this.g(a,"enableDragMove",!0);this.pa=
this.K.length;-1===(" "+this.a.className+" ").search(/\sfattable\s/)&&(this.a.className+=" fattable");this.p=this.G*this.$;this.s=L(this.K);this.q=this.s[this.s.length-1];this.j={};this.cells={};this.U=new I;this.X();this.Ea&&C.ta(function(){return c.sa()})}c.prototype.g=function(a,b,c){if(null==a[b]){if(void 0===c)throw"Expected parameter <"+b+">";this[b]=c}else this[b]=a[b]};c.prototype.X=function(){this.R=this.a.offsetWidth;this.Y=this.a.offsetHeight-this.F;this.f=Math.min(M(this.s,this.R)+2,this.K.length);
this.h=Math.min((this.Y/this.G|0)+2,this.$)};c.prototype.ka=function(a,b){return[u(b/this.G|0,0,this.$-this.h),u(K(this.s,a),0,this.pa-this.f)]};c.prototype.J=function(){var a;this.U.ua();null!=(a=this.Aa)&&(a.n=null);this.k.J(this);this.a.innerHTML="";return this.b=this.i=null};c.prototype.sa=function(){var a,b,c,g,d,k,h,l=this;this.J();this.X();this.j={};this.cells={};this.a.innerHTML="";this.b=document.createElement("div");this.b.className+=" fattable-header-container";this.b.style.height=this.F+
"px";this.A=document.createElement("div");this.A.className="fattable-viewport";this.A.style.width=this.R+"px";this.A.style.height=this.F+"px";this.b.appendChild(this.A);this.i=document.createElement("div");this.i.className="fattable-body-container";this.i.style.top=this.F+"px";this.r=document.createElement("div");this.r.className="fattable-viewport";this.r.style.width=this.R+"px";this.r.style.height=this.Y+"px";g=a=this.f;for(k=2*this.f;a<k;g=a+=1)for(c=d=this.h,h=2*this.h;d<h;c=d+=1)b=document.createElement("div"),
b.c=!1,b.style.height=this.G+"px",this.r.appendChild(b),this.cells[c+","+g]=b;a=d=this.f;for(k=2*this.f;d<k;a=d+=1)b=document.createElement("div"),b.style.height=this.F+"px",b.c=!1,this.j[a]=b,this.A.appendChild(b);this.t=this.h;this.l=this.f;this.display(0,0);this.a.appendChild(this.i);this.a.appendChild(this.b);this.i.appendChild(this.r);this.aa();this.scroll=new J(this.i,this.b,this.q,this.p,this.U,this.Ia,this.T);b=function(a,b){var d,k,h;d=l.ka(a,b);c=d[0];g=d[1];l.display(c,g);h=l.j;for(k in h)d=
h[k],d.style[G]="translate("+(d.left-a)+"px, 0px)";h=l.cells;for(k in h)d=h[k],d.style[G]="translate("+(d.left-a)+"px,"+(d.top-b)+"px)";clearTimeout(l.ra);l.ra=setTimeout(l.aa.bind(l),200);return l.n(a,b)};this.scroll.n=b;return b(0,0)};c.prototype.aa=function(a){var b,c,g,d,k,h,l,m,e,n=this;null==a&&(a=!1);h=function(b){(a||b.c)&&n.m.v(d,function(a){b.c=!1;return n.k.W(b,a)})};e=[];d=l=this.l;for(m=this.l+this.f;l<m;d=l+=1)c=this.j[d],h(c),e.push(function(){var c,e,f,h=this;f=[];g=c=this.t;for(e=
this.t+this.h;c<e;g=c+=1)k=g+","+d,b=this.cells[k],a||b.c?f.push(function(a){return h.m.u(g,d,function(b){a.c=!1;return h.k.N(a,b)})}(b)):f.push(void 0);return f}.call(this));return e};c.prototype.n=function(){};c.prototype.display=function(a,b){this.b.style.display="none";this.i.style.display="none";this.na(b);this.oa(a);this.b.style.display="";return this.i.style.display=""};c.prototype.na=function(a){var b,c,g,d,k,h,l,m,e,n,q,r,p,s,t,w=this;e=this.t;q=a-this.l;if(0!==q){k=Math.min(Math.abs(q),
this.f);for(b=p=0;p<k;b=p+=1)for(0<q?(n=this.l+b,d=a+b+this.f-k):(n=this.l+this.f-k+b,d=a+b),g=this.s[d],c=this.K[d]+"px",h=this.j[n],delete this.j[n],this.m.Z(d)?this.m.v(d,function(a){h.c=!1;return w.k.W(h,a)}):h.c||(h.c=!0,this.k.ha(h)),h.left=g,h.style.width=c,this.j[d]=h,r=function(a){w.m.C(l,d)?w.m.u(l,d,function(b){a.c=!1;return w.k.N(a,b)}):a.c||(a.c=!0,w.k.V(a))},l=s=e,t=e+this.h;s<t;l=s+=1)m=l+","+n,b=this.cells[m],delete this.cells[m],this.cells[l+","+d]=b,b.left=g,b.style.width=c,r(b);
this.l=a}};c.prototype.oa=function(a){var b,c,g,d,k,h,l,m,e,n,q,r,p,s,t=this;h=this.t;l=this.l;n=a-h;if(0!==n){g=Math.min(Math.abs(n),this.h);for(b=r=0;r<g;b=r+=1)for(0<n?(m=h+b,c=a+b+this.h-g):(m=h+this.h-g+b,c=a+b),e=c*this.G,q=function(a){t.m.C(c,d)?t.m.u(c,d,function(b){a.c=!1;return t.k.N(a,b)}):a.c||(a.c=!0,t.k.V(a))},d=p=l,s=l+this.f;p<s;d=p+=1)k=m+","+d,b=this.cells[k],delete this.cells[k],this.cells[c+","+d]=b,b.top=e,q(b);this.t=a}};return c}();D=function(c){return new B(c)};v={Ca:y,Da:B,
za:A,ya:v,Ba:x,bound:u};for(E in v)x=v[E],D[E]=x;window.Ga=D}).call(this);
